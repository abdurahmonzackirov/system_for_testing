import asyncio
import os
from dotenv import load_dotenv
from sqlalchemy import update, select
from app.database.models import engine, async_session, Theme, Subject

# ะฃะปัััะตะฝะฝัะต ะพะฟะธัะฐะฝะธั ัะตะผ ะฟะพ ัะธะผะธะธ
CHEMISTRY_DESCRIPTIONS = {
    'ะกััะพะตะฝะธะต ะฐัะพะผะฐ': '''๐ ะกะขะะะะะะ ะะขะะะ

๐ ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั:
โข ะฏะดัะพ: ะฟัะพัะพะฝั (p+) ะธ ะฝะตะนััะพะฝั (n0)
โข ะญะปะตะบััะพะฝะฝะฐั ะพะฑะพะปะพัะบะฐ: ัะปะตะบััะพะฝั (e-)
โข ะัะพะผะฝัะน ะฝะพะผะตั = ะบะพะปะธัะตััะฒะพ ะฟัะพัะพะฝะพะฒ
โข ะะฐััะพะฒะพะต ัะธัะปะพ = ะฟัะพัะพะฝั + ะฝะตะนััะพะฝั

โ๏ธ ะะฒะฐะฝัะพะฒัะต ัะธัะปะฐ (ะพะฟะธััะฒะฐัั ะฟะพะปะพะถะตะฝะธะต ัะปะตะบััะพะฝะฐ):
โข n (ะณะปะฐะฒะฝะพะต) = 1, 2, 3... (ัะฝะตัะณะตัะธัะตัะบะธะน ััะพะฒะตะฝั)
โข l (ะพัะฑะธัะฐะปัะฝะพะต) = 0, 1, 2... (ัะพัะผะฐ ะพัะฑะธัะฐะปะธ: s, p, d, f)
โข ml (ะผะฐะณะฝะธัะฝะพะต) = -l...0...+l (ะพัะธะตะฝัะฐัะธั ะฒ ะฟัะพัััะฐะฝััะฒะต)
โข ms (ัะฟะธะฝะพะฒะพะต) = ยฑ1/2 (ัะฟะธะฝ ัะปะตะบััะพะฝะฐ)

๐ ะัะธะฝัะธะฟ ะะฐัะปะธ:
ะะฒะฐ ัะปะตะบััะพะฝะฐ ะฒ ะพะดะฝะพะผ ะฐัะพะผะต ะฝะต ะผะพะณัั ะธะผะตัั ะพะดะธะฝะฐะบะพะฒัะต ะฒัะต ัะตัััะต ะบะฒะฐะฝัะพะฒัะต ัะธัะปะฐ.
ะะฐะบัะธะผัะผ 2 ัะปะตะบััะพะฝะฐ ะฝะฐ ะพะดะฝะพะน ะพัะฑะธัะฐะปะธ!

๐ฏ ะัะฐะฒะธะปะพ ะัะฝะดะฐ:
ะญะปะตะบััะพะฝั ะทะฐะฟะพะปะฝััั ะพัะฑะธัะฐะปะธ ะพะดะธะฝะพัะฝะพ ะฟะตัะตะด ัะตะผ, ะบะฐะบ ัะฟะฐัะธะฒะฐัััั.

๐ ะะพััะดะพะบ ะทะฐะฟะพะปะฝะตะฝะธั ะพัะฑะธัะฐะปะตะน (1s < 2s < 2p < 3s < 3p < 4s < 3d < 4p...):
โข ะฃะณะปะตัะพะด (C, Z=6): 1sยฒ 2sยฒ 2pยฒ
โข ะะธัะปะพัะพะด (O, Z=8): 1sยฒ 2sยฒ 2pโด
โข ะะตะปะตะทะพ (Fe, Z=26): [Ar] 3dโถ 4sยฒ

๐ก ะัะฐะบัะธัะตัะบะธะน ัะพะฒะตั:
ะะฐะฟะพะผะฝะธัะต ะผะฝะตะผะพะฝะธัะตัะบะพะต ะฟัะฐะฒะธะปะพ ะดะธะฐะณะพะฝะฐะปะตะน ะดะปั ะทะฐะฟะพะปะฝะตะฝะธั ะพัะฑะธัะฐะปะตะน!''',

    'ะะตัะธะพะดะธัะตัะบะฐั ัะธััะตะผะฐ': '''๐ ะะะะะะะะงะะกะะะฏ ะกะะกะขะะะ ะญะะะะะะขะะ

๐๏ธ ะัะณะฐะฝะธะทะฐัะธั ัะฐะฑะปะธัั ะะตะฝะดะตะปะตะตะฒะฐ:
โข 7 ะฟะตัะธะพะดะพะฒ (ัััะพะบะธ): ะบะฐะถะดัะน ะฟะตัะธะพะด ัะพะพัะฒะตัััะฒัะตั ะทะฐะฟะพะปะฝะตะฝะธั ะฝะพะฒะพะณะพ ัะฝะตัะณะตัะธัะตัะบะพะณะพ ััะพะฒะฝั
โข 8 ะณััะฟะฟ (ััะพะปะฑัั): ัะปะตะผะตะฝัั ะพะดะฝะพะน ะณััะฟะฟั ะธะผะตัั ะพะดะธะฝะฐะบะพะฒะพะต ัะธัะปะพ ะฒะฐะปะตะฝัะฝัั ัะปะตะบััะพะฝะพะฒ
โข ะะฐะปะตะฝัะฝัะต ัะปะตะบััะพะฝั ะพะฟัะตะดะตะปััั ัะธะผะธัะตัะบะธะต ัะฒะพะนััะฒะฐ

๐ ะะฐะบะพะฝะพะผะตัะฝะพััะธ ะฒ ะฟะตัะธะพะดะฐั (ัะปะตะฒะฐ ะฝะฐะฟัะฐะฒะพ):
1. ะะฐะดะธัั ะฐัะพะผะฐ ะฃะะะะฌะจะะะขะกะฏ
   ะัะธะผะตั: Na > Mg > Al > Si > P > S > Cl
2. ะญะปะตะบััะพะพััะธัะฐัะตะปัะฝะพััั ะะะะะะกะขะะะข
   Li < Be < B < C < N < O < F (ัะฐะผัะน ัะปะตะบััะพะพััะธัะฐัะตะปัะฝัะน)
3. ะญะฝะตัะณะธั ะธะพะฝะธะทะฐัะธะธ ะะะะะะกะขะะะข
4. ะะตะผะตัะฐะปะปะธัะฝะพััั ะะะะะะกะขะะะข (ะผะตัะฐะปะปะธัะฝะพััั ัะฑัะฒะฐะตั)

โฌ๏ธ ะะฐะบะพะฝะพะผะตัะฝะพััะธ ะฒ ะณััะฟะฟะฐั (ัะฒะตััั ะฒะฝะธะท):
1. ะะฐะดะธัั ะฐัะพะผะฐ ะะะะะะกะขะะะข
2. ะญะปะตะบััะพะพััะธัะฐัะตะปัะฝะพััั ะฃะะซะะะะข
3. ะะตัะฐะปะปะธัะฝะพััั ะะะะะะกะขะะะข

๐ก ะกะพะฒะตั: ะญะปะตะบััะพะพััะธัะฐัะตะปัะฝะพััั ะพะฟัะตะดะตะปัะตั ะฒะธะด ัะฒัะทะธ ะฒ ะผะพะปะตะบัะปะต!''',

    'ะฅะธะผะธัะตัะบะธะต ัะตะฐะบัะธะธ': '''๐ ะฅะะะะงะะกะะะ ะะะะะฆะะ

๐ ะะฟัะตะดะตะปะตะฝะธะต: ะัะพัะตัั ะฟัะตะฒัะฐัะตะฝะธั ะพะดะฝะธั ะฒะตัะตััะฒ ะฒ ะดััะณะธะต.

๐ ะงะตัััะต ะพัะฝะพะฒะฝัั ัะธะฟะฐ:

1๏ธโฃ ะกะะะะะะะะะ: 2Na + Clโ = 2NaCl, Hโ + Clโ = 2HCl
2๏ธโฃ ะะะะะะะะะะ: 2HโOโ = 2HโO + Oโ, CaCOโ = CaO + COโ
3๏ธโฃ ะะะะะฉะะะะฏ: Zn + 2HCl = ZnClโ + Hโ, Fe + CuSOโ = FeSOโ + Cu
4๏ธโฃ ะะะะะะ: AgNOโ + NaCl = AgClโ + NaNOโ

โ๏ธ ะะฐะบะพะฝ ัะพััะฐะฝะตะฝะธั ะผะฐััั:
ะะฐััะฐ ัะตะฐะณะตะฝัะพะฒ = ะะฐััะฐ ะฟัะพะดัะบัะพะฒ

โก ะกะพะฒะตั ะดะปั ััะฐะฒะฝะธะฒะฐะฝะธั:
1. ะะพััะธัะฐะนัะต ะฐัะพะผั ั ะพะดะฝะพะน ะธ ะดััะณะพะน ััะพัะพะฝั
2. ะะพะดะฑะธัะฐะนัะต ะบะพัััะธัะธะตะฝัั, ะฝะฐัะธะฝะฐั ั ะผะตัะฐะปะปะพะฒ
3. ะัะพะฒะตัััะต ะบะฐะถะดัะน ัะปะตะผะตะฝั ะพัะดะตะปัะฝะพ''',

    'ะะฐััะฒะพัั ะธ ัะปะตะบััะพะปะธัั': '''๐ ะะะกะขะะะะซ ะ ะญะะะะขะะะะะขะซ

๐ฅค ะัะฝะพะฒะฝัะต ะพะฟัะตะดะตะปะตะฝะธั:
โข ะะฐััะฒะพั: ะพะดะฝะพัะพะดะฝะฐั ัะธััะตะผะฐ (ัะฐััะฒะพัะธัะตะปั + ัะฐััะฒะพััะฝะฝะพะต ะฒะตัะตััะฒะพ)
โข ะญะปะตะบััะพะปะธั: ะฒะตัะตััะฒะพ, ะดะฐััะตะต ะธะพะฝั ะฒ ัะฐััะฒะพัะต

๐ ะกะฟะพัะพะฑั ะฒััะฐะถะตะฝะธั ะบะพะฝัะตะฝััะฐัะธะธ:
1๏ธโฃ ะะพะปััะฝะพััั (M): ะผะพะปะธ ะฒะตัะตััะฒะฐ ะฒ 1 ะปะธััะต ัะฐััะฒะพัะฐ
2๏ธโฃ ะัะพัะตะฝัะฝะฐั ะบะพะฝัะตะฝััะฐัะธั (%): (ะผะฐััะฐ ะฒะตัะตััะฒะฐ / ะพะฑัะฐั ะผะฐััะฐ) ร 100%
3๏ธโฃ pH-ัะบะฐะปะฐ: pH = -lg[Hโบ]
   โข pH < 7: ะบะธัะปะฐั ััะตะดะฐ
   โข pH = 7: ะฝะตะนััะฐะปัะฝะฐั
   โข pH > 7: ัะตะปะพัะฝะฐั

๐งช ะกะธะปัะฝัะต ัะปะตะบััะพะปะธัั: HCl, HโSOโ, HNOโ, NaOH, KOH, NaCl
๐งช ะกะปะฐะฑัะต ัะปะตะบััะพะปะธัั: HF, CHโCOOH, NHโยทHโO

๐ง ะะธะดัะพะปะธะท ัะพะปะตะน:
NaโCOโ + HโO โ NaHCOโ + NaOH

๐ก ะกะพะฒะตั: ะะปั ัะฐะทะฒะตะดะตะฝะธั ะบะธัะปะพัั ะดะพะฑะฐะฒะปัะนัะต ะะะกะะะขะฃ ะฒ ะะะะฃ!''',

    'ะะบะธัะปะธัะตะปัะฝะพ-ะฒะพัััะฐะฝะพะฒะธัะตะปัะฝัะต ัะตะฐะบัะธะธ': '''๐ ะะะะกะะะขะะะฌะะ-ะะะกะกะขะะะะะะขะะะฌะะซะ ะะะะะฆะะ

๐ด ะัะฝะพะฒะฝัะต ะฟะพะฝััะธั:
โข ะะบะธัะปะตะฝะธะต: ะฟะพัะตัั ัะปะตะบััะพะฝะพะฒ (โ ััะตะฟะตะฝั ะพะบะธัะปะตะฝะธั)
โข ะะพัััะฐะฝะพะฒะปะตะฝะธะต: ะฟัะธัะพะตะดะธะฝะตะฝะธะต ัะปะตะบััะพะฝะพะฒ (โ ััะตะฟะตะฝั ะพะบะธัะปะตะฝะธั)
โข ะะบะธัะปะธัะตะปั: ะฟะพะปััะฐะตั ัะปะตะบััะพะฝั
โข ะะพัััะฐะฝะพะฒะธัะตะปั: ะพัะดะฐัั ัะปะตะบััะพะฝั

๐ ะัะฐะฒะธะปะฐ ััะตะฟะตะฝะธ ะพะบะธัะปะตะฝะธั:
โข ะญะปะตะผะตะฝั ะฒ ัะฒะพะฑะพะดะฝะพะผ ะฒะธะดะต: 0
โข ะะธัะปะพัะพะด ะฒ ัะพะตะดะธะฝะตะฝะธัั: -2 (ะบัะพะผะต ะฟะตัะพะบัะธะดะพะฒ -1)
โข ะะพะดะพัะพะด: +1 (ะบัะพะผะต ะณะธะดัะธะดะพะฒ -1)
โข ะฉะตะปะพัะฝัะต ะผะตัะฐะปะปั: +1
โข ะกัะผะผะฐ ััะตะฟะตะฝะตะน = ะทะฐััะดั

๐ ะัะธะผะตัั:
1๏ธโฃ 2Fe + 3Clโ = 2FeClโ: Fe (0โ+3), Cl (0โ-1)
2๏ธโฃ 2KMnOโ + 16HCl = 2KCl + 2MnClโ + 5Clโ + 8HโO: Mn (+7โ+2)
3๏ธโฃ Cu + 2HโSOโ = CuSOโ + SOโ + 2HโO: Cu (0โ+2), S (+6โ+4)

โ๏ธ ะะตัะพะด ัะปะตะบััะพะฝะฝะพะณะพ ะฑะฐะปะฐะฝัะฐ:
ะงะธัะปะพ ะฟะพัะตััะฝะฝัั ัะปะตะบััะพะฝะพะฒ = ะงะธัะปะพ ะฟะพะปััะตะฝะฝัั ัะปะตะบััะพะฝะพะฒ

๐ก ะกะพะฒะตั: ะ ะะ ัะตะฐะบัะธัั ัะธัะปะพ e-, ะฟะพัะตััะฝะฝัั ะฒะพัััะฐะฝะพะฒะธัะตะปะตะผ, = ัะธัะปั e-, ะฟะพะปััะตะฝะฝัั ะพะบะธัะปะธัะตะปะตะผ!'''
}

# ะฃะปัััะตะฝะฝัะต ะพะฟะธัะฐะฝะธั ัะตะผ ะฟะพ ะผะฐัะตะผะฐัะธะบะต
MATH_DESCRIPTIONS = {
    'ะขัะธะณะพะฝะพะผะตััะธั': '''๐ ะขะะะะะะะะะขะะะฏ

๐ ะัะฝะพะฒะฝัะต ะพะฟัะตะดะตะปะตะฝะธั ะฒ ะฟััะผะพัะณะพะปัะฝะพะผ ััะตัะณะพะปัะฝะธะบะต:
โข sin(ฮฑ) = ะฟัะพัะธะฒะพะปะตะถะฐัะธะน / ะณะธะฟะพัะตะฝัะทะฐ
โข cos(ฮฑ) = ะฟัะธะปะตะถะฐัะธะน / ะณะธะฟะพัะตะฝัะทะฐ
โข tan(ฮฑ) = sin(ฮฑ)/cos(ฮฑ) = ะฟัะพัะธะฒะพะปะตะถะฐัะธะน / ะฟัะธะปะตะถะฐัะธะน

๐ ะัะฝะพะฒะฝะพะต ััะธะณะพะฝะพะผะตััะธัะตัะบะพะต ัะพะถะดะตััะฒะพ:
sinยฒ(ฮฑ) + cosยฒ(ฮฑ) = 1 (ะกะะะะ ะะะะะะ!)

๐ ะคะพัะผัะปั ัะปะพะถะตะฝะธั:
โข sin(ฮฑ ยฑ ฮฒ) = sin(ฮฑ)cos(ฮฒ) ยฑ cos(ฮฑ)sin(ฮฒ)
โข cos(ฮฑ ยฑ ฮฒ) = cos(ฮฑ)cos(ฮฒ) โ sin(ฮฑ)sin(ฮฒ)

๐ ะคะพัะผัะปั ะดะฒะพะนะฝะพะณะพ ัะณะปะฐ:
โข sin(2ฮฑ) = 2sin(ฮฑ)cos(ฮฑ)
โข cos(2ฮฑ) = cosยฒ(ฮฑ) - sinยฒ(ฮฑ)
โข tan(2ฮฑ) = 2tan(ฮฑ) / (1 - tanยฒ(ฮฑ))

๐ฏ ะะฐะถะฝัะต ะทะฝะฐัะตะฝะธั (ะทะฐะฟะพะผะฝะธัะต!):
โข sin(30ยฐ)=1/2, cos(30ยฐ)=โ3/2, tan(30ยฐ)=1/โ3
โข sin(45ยฐ)=โ2/2, cos(45ยฐ)=โ2/2, tan(45ยฐ)=1
โข sin(60ยฐ)=โ3/2, cos(60ยฐ)=1/2, tan(60ยฐ)=โ3
โข sin(90ยฐ)=1, cos(90ยฐ)=0

โฑ๏ธ ะะตัะธะพะดะธัะฝะพััั:
โข sin(x) ะธ cos(x): ะฟะตัะธะพะด 2ฯ (360ยฐ)
โข tan(x): ะฟะตัะธะพะด ฯ (180ยฐ)

๐ก ะกะพะฒะตั: ะัััะธัะต ัะฐะฑะปะธัะฝัะต ะทะฝะฐัะตะฝะธั 0ยฐ, 30ยฐ, 45ยฐ, 60ยฐ, 90ยฐ!''',

    'ะัะพะธะทะฒะพะดะฝะฐั ะธ ะธะฝัะตะณัะฐะป': '''๐ ะะะะะะะะะะะฏ ะ ะะะขะะะะะ

๐ ะัะพะธะทะฒะพะดะฝะฐั - ัะบะพัะพััั ะธะทะผะตะฝะตะฝะธั ััะฝะบัะธะธ!
f'(x) = lim(hโ0) [f(x+h) - f(x)] / h

๐ ะัะฝะพะฒะฝัะต ะฟัะพะธะทะฒะพะดะฝัะต (ะะะะะะะะขะ!):
โข (xโฟ)' = nยทx^(n-1)
โข (eหฃ)' = eหฃ
โข (ln(x))' = 1/x
โข (sin(x))' = cos(x)
โข (cos(x))' = -sin(x)

๐ ะัะฐะฒะธะปะฐ ะดะธััะตัะตะฝัะธัะพะฒะฐะฝะธั:
โข (u + v)' = u' + v'
โข (uยทv)' = u'v + uv' (ะฟัะพะธะทะฒะตะดะตะฝะธะต)
โข (u/v)' = (u'v - uv') / vยฒ (ะดะตะปะตะฝะธะต)
โข (f(g(x)))' = f'(g(x))ยทg'(x) (ัะตะฟะฝะพะต ะฟัะฐะฒะธะปะพ)

๐ ะัะธะผะตัั:
โข (xยณ - 2x + 5)' = 3xยฒ - 2
โข (e^(2x))' = 2e^(2x)
โข (sin(xยฒ))' = 2xยทcos(xยฒ)

โซ ะะะขะะะะะ - ะพะฑัะฐัะฝะฐั ะพะฟะตัะฐัะธั!

๐ ะัะฝะพะฒะฝัะต ะธะฝัะตะณัะฐะปั:
โข โซ xโฟ dx = x^(n+1)/(n+1) + C
โข โซ 1/x dx = ln|x| + C
โข โซ eหฃ dx = eหฃ + C
โข โซ sin(x) dx = -cos(x) + C
โข โซ cos(x) dx = sin(x) + C

๐ก ะัะพะฒะตัะบะฐ: ะฟัะพะธะทะฒะพะดะฝะฐั ะพั ัะตะทัะปััะฐัะฐ ะธะฝัะตะณัะฐะปะฐ = ะธััะพะดะฝะฐั ััะฝะบัะธั!''',

    'ะะพะณะฐัะธัะผั ะธ ััะตะฟะตะฝะธ': '''๐ ะะะะะะะคะะซ ะ ะกะขะะะะะ

๐ช ะกะฒะพะนััะฒะฐ ััะตะฟะตะฝะตะน:
โข aแต ยท aโฟ = a^(m+n)
โข aแต / aโฟ = a^(m-n)
โข (aแต)โฟ = a^(mn)
โข (ab)โฟ = aโฟ ยท bโฟ
โข aโฐ = 1, aยน = a
โข aโปโฟ = 1/aโฟ
โข a^(1/n) = โฟโa (ะดัะพะฑะฝะฐั ััะตะฟะตะฝั)

๐ ะัะธะผะตัั:
โข 2ยณ = 8, 2โปยฒ = 1/4 = 0.25
โข 4^(1/2) = 2, 27^(1/3) = 3
โข 16^(3/4) = 8

๐ ะะะะะะะคะะซ:
logโ(b) = x ะพะทะฝะฐัะฐะตั aหฃ = b

๐ ะัะฝะพะฒะฝัะต ัะฒะพะนััะฒะฐ:
โข logโ(bc) = logโ(b) + logโ(c)
โข logโ(b/c) = logโ(b) - logโ(c)
โข logโ(bโฟ) = nยทlogโ(b)
โข logโ(a) = 1, logโ(1) = 0

๐ ะกะผะตะฝะฐ ะพัะฝะพะฒะฐะฝะธั:
logโ(b) = logc(b) / logc(a)

๐ ะัะธะผะตัั:
โข logโ(8) = 3, ั.ะบ. 2ยณ = 8
โข logโ(1/9) = -2, ั.ะบ. 3โปยฒ = 1/9
โข lg(100) = 2, ln(eยณ) = 3

๐ก ะะพะณะฐัะธัะผ ะธ ัะบัะฟะพะฝะตะฝัะฐ - ะพะฑัะฐัะฝัะต ะพะฟะตัะฐัะธะธ!''',

    'ะะตะพะผะตััะธั': '''๐ ะะะะะะขะะะฏ

๐ ะะะะฉะะะ ะคะะะฃะ:
โข ะขัะตัะณะพะปัะฝะธะบ: S = (1/2)ยทaยทh = (1/2)ยทaยทbยทsin(C)
โข ะะฒะฐะดัะฐั: S = aยฒ, ะดะธะฐะณะพะฝะฐะปั d = aโ2
โข ะััะผะพัะณะพะปัะฝะธะบ: S = aยทb, ะดะธะฐะณะพะฝะฐะปั d = โ(aยฒ+bยฒ)
โข ะััะณ: S = ฯยทrยฒ = ฯยทdยฒ/4, ะดะปะธะฝะฐ C = 2ฯr
โข ะขัะฐะฟะตัะธั: S = [(a+b)/2]ยทh
โข ะะฐัะฐะปะปะตะปะพะณัะฐะผะผ: S = aยทh = aยทbยทsin(ฮฑ)

๐ฆ ะะะชะะะซ ะคะะะฃะ:
โข ะัะฑ: V = aยณ, ะดะธะฐะณะพะฝะฐะปั d = aโ3
โข ะััะผะพัะณะพะปัะฝัะน ะฟะฐัะฐะปะปะตะปะตะฟะธะฟะตะด: V = aยทbยทc
โข ะะธัะฐะผะธะดะฐ: V = (1/3)ยทSะพัะฝะพะฒะฐะฝะธัยทh
โข ะะพะฝัั: V = (1/3)ยทฯยทrยฒยทh
โข ะฆะธะปะธะฝะดั: V = ฯยทrยฒยทh
โข ะกัะตัะฐ: V = (4/3)ยทฯยทrยณ, S = 4ฯrยฒ

๐บ ะขะะะะะะ ะะะคะะะะะ:
cยฒ = aยฒ + bยฒ (ะดะปั ะฟััะผะพัะณะพะปัะฝัั ััะตัะณะพะปัะฝะธะบะพะฒ)

ะัะธะผะตั: 3ยฒ + 4ยฒ = 5ยฒ (9 + 16 = 25) โ

๐ก ะะฐะฟะพะผะฝะธัะต ัะพัะผัะปั ัะฐะผัั ัะฐัะฟัะพัััะฐะฝัะฝะฝัั ัะธะณัั!''',

    'ะกะธััะตะผั ััะฐะฒะฝะตะฝะธะน': '''๐ ะกะะกะขะะะซ ะฃะะะะะะะะ

๐ฏ ะกะธััะตะผะฐ - ะฝะตัะบะพะปัะบะพ ััะฐะฒะฝะตะฝะธะน, ะบะพัะพััะต ะฒัะฟะพะปะฝััััั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ.

๐ ะะะขะะะซ ะะะจะะะะฏ:

1๏ธโฃ ะะพะดััะฐะฝะพะฒะบะฐ:
   y = 2x, x + y = 6
   ะะพะดััะฐะฒะปัะตะผ: x + 2x = 6 โ x = 2, y = 4

2๏ธโฃ ะกะปะพะถะตะฝะธะต:
   2x + y = 5, x - y = 1
   ะกะบะปะฐะดัะฒะฐะตะผ: 3x = 6 โ x = 2, y = 1

3๏ธโฃ ะัะฐัะธัะตัะบะธะน:
   ะกััะพะธะผ ะณัะฐัะธะบะธ - ะฟะตัะตัะตัะตะฝะธะต = ัะตัะตะฝะธะต

4๏ธโฃ ะะตัะพะด ะะฐัััะฐ:
   ะะฐััะธัะฐ ัะธััะตะผั โ ััะตัะณะพะปัะฝัะน ะฒะธะด โ ัะตัะตะฝะธะต

๐ ะขะะะซ ะกะะกะขะะ:

1๏ธโฃ ะกะพะฒะผะตััะฝะฐั ะพะฟัะตะดะตะปัะฝะฝะฐั: ะพะดะฝะพ ัะตัะตะฝะธะต
   x + y = 5, x - y = 1 โ (3, 2)

2๏ธโฃ ะกะพะฒะผะตััะฝะฐั ะฝะตะพะฟัะตะดะตะปัะฝะฝะฐั: ะฑะตัะบะพะฝะตัะฝะพ ะผะฝะพะณะพ
   2x + 2y = 6, x + y = 3 โ ะฟััะผัะต ัะพะฒะฟะฐะดะฐัั

3๏ธโฃ ะะตัะพะฒะผะตััะฝะฐั: ะฝะตั ัะตัะตะฝะธะน
   x + y = 3, x + y = 5 โ ะฟััะผัะต ะฟะฐัะฐะปะปะตะปัะฝั

4๏ธโฃ ะะตะปะธะฝะตะนะฝะฐั ัะธััะตะผะฐ:
   xยฒ + yยฒ = 25, x + y = 7 โ (3,4) ะธ (4,3)

๐ก ะกะพะฒะตั: ะัะตะณะดะฐ ะฟัะพะฒะตััะนัะต ัะตัะตะฝะธะต ะฟะพะดััะฐะฝะพะฒะบะพะน!'''
}

async def main():
    load_dotenv()
    
    async with async_session() as session:
        # ะกะฝะฐัะฐะปะฐ ะฟัะพะฒะตััะตะผ ะธ ัะพะทะดะฐัะผ ะฟัะตะดะผะตัั ะตัะปะธ ะธั ะฝะตั
        subjects_result = await session.execute(select(Subject))
        subjects = subjects_result.scalars().all()
        
        if not subjects:
            print("๐ ะัะตะดะผะตัั ะฝะต ะฝะฐะนะดะตะฝั, ัะพะทะดะฐั...")
            chemistry = Subject(name='ะฅะธะผะธั')
            math = Subject(name='ะะฐัะตะผะฐัะธะบะฐ')
            session.add(chemistry)
            session.add(math)
            await session.flush()
            chemistry_id = chemistry.id
            math_id = math.id
        else:
            chemistry_id = next((s.id for s in subjects if s.name == 'ะฅะธะผะธั'), 1)
            math_id = next((s.id for s in subjects if s.name == 'ะะฐัะตะผะฐัะธะบะฐ'), 2)
        
        # ะะฑะฝะพะฒะปัะตะผ ัะธะผะธัะตัะบะธะต ัะตะผั
        for theme_name, description in CHEMISTRY_DESCRIPTIONS.items():
            result = await session.execute(select(Theme).where(Theme.name == theme_name))
            theme = result.scalar()
            
            if theme:
                # ะขะตะผะฐ ัััะตััะฒัะตั - ะพะฑะฝะพะฒะปัะตะผ ะพะฟะธัะฐะฝะธะต
                theme.description = description
                print(f"โ ะะฑะฝะพะฒะปะตะฝะฐ: {theme_name}")
            else:
                # ะขะตะผั ะฝะตั - ัะพะทะดะฐัะผ
                new_theme = Theme(
                    name=theme_name,
                    description=description,
                    subject_id=chemistry_id
                )
                session.add(new_theme)
                print(f"โ ะกะพะทะดะฐะฝะฐ: {theme_name}")
        
        # ะะฑะฝะพะฒะปัะตะผ ะผะฐัะตะผะฐัะธัะตัะบะธะต ัะตะผั
        for theme_name, description in MATH_DESCRIPTIONS.items():
            result = await session.execute(select(Theme).where(Theme.name == theme_name))
            theme = result.scalar()
            
            if theme:
                # ะขะตะผะฐ ัััะตััะฒัะตั - ะพะฑะฝะพะฒะปัะตะผ ะพะฟะธัะฐะฝะธะต
                theme.description = description
                print(f"โ ะะฑะฝะพะฒะปะตะฝะฐ: {theme_name}")
            else:
                # ะขะตะผั ะฝะตั - ัะพะทะดะฐัะผ
                new_theme = Theme(
                    name=theme_name,
                    description=description,
                    subject_id=math_id
                )
                session.add(new_theme)
                print(f"โ ะกะพะทะดะฐะฝะฐ: {theme_name}")
        
        await session.commit()
    
    print("\nโ ะัะต ะพะฟะธัะฐะฝะธั ัะตะผ ััะฟะตัะฝะพ ะพะฑะฝะพะฒะปะตะฝั!")
    print("๐ ะขะตะผั ัะตะฟะตัั ัะพะดะตัะถะฐั ะฟะพะดัะพะฑะฝะพะต ะพะฑัััะฝะตะฝะธะต ะธ ะฟัะธะผะตัั!")

if __name__ == '__main__':
    asyncio.run(main())
